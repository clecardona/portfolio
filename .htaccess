<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  
  # Disable automatic directory slashes
  DirectorySlash Off
  
  # Specific rules for top-level routes
  RewriteRule ^about$ /about.html [L]
  RewriteRule ^about/$ /about.html [L]
  RewriteRule ^work$ /work.html [L]
  RewriteRule ^work/$ /work.html [L]

  # Specific rules for nested routes
  RewriteRule ^work/fletnix$ /work/fletnix.html [L]
  RewriteRule ^work/fletnix/$ /work/fletnix.html [L]
  RewriteRule ^work/lumi-weather$ /work/lumi-weather.html [L]
  RewriteRule ^work/lumi-weather/$ /work/lumi-weather.html [L]

  # If the requested resource exists as a file, serve it directly
  RewriteCond %{REQUEST_FILENAME} -f
  RewriteRule ^ - [L]
  
  # If the requested resource doesn't exist but the .html file does, serve it
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME}.html -f
  RewriteRule ^(.*)$ $1.html [L]
  
  # If the request is for a directory with an index.html, serve that
  RewriteCond %{REQUEST_FILENAME} -d
  RewriteCond %{REQUEST_FILENAME}/index.html -f
  RewriteRule ^(.*)$ $1/index.html [L]
  
  # If nothing else matches, try the home page
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^ index.html [L]
</IfModule>

# Prevent directory listings
Options -Indexes

# Handle errors
ErrorDocument 403 /404.html
ErrorDocument 404 /404.html
ErrorDocument 500 /404.html